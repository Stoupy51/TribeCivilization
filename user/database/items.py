
# Here is a useful link if you want to override autogenerated models: https://github.com/PixiGeko/Minecraft-default-assets/tree/latest/assets/minecraft/models/block

# Import database helper and setup constants
from python_datapack.utils.database_helper import *
from python_datapack.utils.ingredients import *
from python_datapack.constants import *

# Categories
MATERIAL: str = "material"
MISCELLANEOUS: str = "miscellaneous"
METEOR_WIKI: list[dict] = [{"text":"Ces météorites ont été réparties\\ndans les structures de ce monde.\\n\\nTrouvez chaque type afin de fabriquer\\nla boussole lunaire !"}]
CRYSTAL_WIKI: list[dict] = [{"text":"Lors de la mort du survivant de la même couleur,\\nce cristal gorgé de pouvoirs est droppé.\\n\\nOn pourrait dire que ceci est,\\nen quelque sorte, leur âme."}]

# Main function should return a database
def main(config: dict, database: dict[str, dict]) -> None:
	ns: str = config["namespace"]

	## Material items
	# Basic items
	database["astral_powder"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
		WIKI_COMPONENT: [{"text":"Ces poudres sont obtenues en brûlant\\nune étoile bleue dans un four.\\n\\n\"Matériau précieux qui doit être chéri\",\\nest une phrase qui devrait le définir."}],
		RESULT_OF_CRAFTING: [
			{"type":"smelting","result_count":2,"cookingtime":200,"experience":1.0,"group":"astral_powder","category":MATERIAL,"ingredient": ingr_repr("blue_star", ns)},
		]
	}
	database["diamond_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["emerald_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["iron_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["zinc_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["blue_star"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
		WIKI_COMPONENT: [{"text":"Le seul moyen de les obtenir est\\nde patienter lors de la nuit,\\nelles tombent alors du ciel."}],
		USED_FOR_CRAFTING: [
			{"type":"crafting_shapeless","result_count":2,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:diamond")], "result": ingr_repr("minecraft:diamond")},
			{"type":"crafting_shapeless","result_count":2,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:emerald")], "result": ingr_repr("minecraft:emerald")},
			{"type":"crafting_shapeless","result_count":4,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:gold_ingot")], "result": ingr_repr("minecraft:gold_ingot")},
			{"type":"crafting_shapeless","result_count":8,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:iron_ingot")], "result": ingr_repr("minecraft:iron_ingot")},
		]
	}

	# Player teams crystals
	colors: list[str] = ["purple", "yellow", "green", "cyan"]
	for color in colors:
		# Get the other colors and create a list of ingredients (3 other = 1 of the current color)
		other_colors: list[str] = [c for c in colors if c != color]
		ingredients: list[dict] = [ingr_repr(f"{c}_crystal", ns) for c in other_colors]

		# Add the item to the database (3 other crystals = 1 of the current color)
		database[f"{color}_crystal"] = {
			"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
			WIKI_COMPONENT: CRYSTAL_WIKI,
			RESULT_OF_CRAFTING: [{"type":"crafting_shapeless","result_count":1,"group":"team_crystal","category":MATERIAL,"ingredients": ingredients}]
		}



	## Miscellaneous items
	# Gold fish craftable from 8 gold ingots and 1 fish
	eight_gold: list[dict] = 8 * [ingr_repr("minecraft:gold_ingot")]
	eight_powder: list[dict] = 8 * [ingr_repr("astral_powder", ns)]
	database["gold_fish"] = {
		"id": "minecraft:golden_apple",
		"category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Ces poissons sont équivalents à des golden apples."}],
		RESULT_OF_CRAFTING: [
			{"type":"crafting_shapeless","result_count":2,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_powder + [ingr_repr("gold_fish", ns)]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:cod")]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:salmon")]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:tropical_fish")]},
		]
	}

	# Life Crystal
	database["life_crystal"] = {
		"id": "minecraft:golden_apple", "category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Chaque cristal de vie que vous consommez\\nvous donnera un demi-coeur supplémentaire.\\n\\nCependant, la limite est de 10 cristaux de vie consommés."}],
		RESULT_OF_CRAFTING: [
			{"type":"crafting_shapeless","result_count":1,"group":"life_crystal","category":MISCELLANEOUS,"ingredients": [
				ingr_repr("astral_powder", ns),
				ingr_repr("purple_crystal", ns),
			ingr_repr("yellow_crystal", ns),
			ingr_repr("green_crystal", ns),
			ingr_repr("cyan_crystal", ns)
		]},
	]}

	# Lunar compass (crafted with all 4 meteorites and a blue star)
	database["lunar_compass"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Cette boussole guidera votre tribu\\nvers "},{"text":"le temple","obfuscated":True},{"text":" une fois activé."}],
		RESULT_OF_CRAFTING: [
		{"type":"crafting_shapeless","result_count":1,"group":"lunar_compass","category":MISCELLANEOUS,"ingredients": [
			ingr_repr("diamond_meteorite", ns),
			ingr_repr("emerald_meteorite", ns),
			ingr_repr("iron_meteorite", ns),
			ingr_repr("zinc_meteorite", ns),
			ingr_repr("blue_star", ns),
		]},
	]}

	# Letter (TODO: find a use for it)
	database["letter"] = {"id": CUSTOM_ITEM_VANILLA, "category": MISCELLANEOUS, WIKI_COMPONENT: [{"text":"Voici la lettre que votre coinjoint(e) vous a envoyé(e)\\navant que vous ne partiez sur le front.\\n\\nPeut-être que vous aurez une fameuse occasion\\nde la lire une fois votre mission terminée."}]}

