
# Here is a useful link if you want to override autogenerated models: https://github.com/PixiGeko/Minecraft-default-assets/tree/latest/assets/minecraft/models/block

# Import database helper and setup constants
from python_datapack.utils.database_helper import *
from python_datapack.utils.ingredients import *
from python_datapack.constants import *

# Categories
MATERIAL: str = "material"
MISCELLANEOUS: str = "miscellaneous"
METEOR_WIKI: list[dict] = [{"text":"Ces météorites ont été réparties\\ndans les structures de ce monde.\\n\\nTrouvez chaque type afin de fabriquer\\nla boussole lunaire !"}]
CRYSTAL_WIKI: list[dict] = [{"text":"Lors de la mort du survivant de la même couleur,\\nce cristal gorgé de pouvoirs est droppé.\\n\\nOn pourrait dire que ceci est,\\nen quelque sorte, leur âme."}]

# Main function should return a database
def main(config: dict, database: dict[str, dict]) -> None:
	ns: str = config["namespace"]

	## Material items
	# Basic items
	database["astral_powder"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
		WIKI_COMPONENT: [{"text":"Ces poudres sont obtenues en brûlant\\nune étoile bleue dans un four.\\n\\n\"Matériau précieux qui doit être chéri\",\\nest une phrase qui devrait le définir."}],
		RESULT_OF_CRAFTING: [
			{"type":"smelting","result_count":2,"cookingtime":200,"experience":1.0,"group":"astral_powder","category":MATERIAL,"ingredient": ingr_repr("blue_star", ns)},
		]
	}
	database["diamond_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["emerald_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["iron_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["zinc_meteorite"] = {"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL, WIKI_COMPONENT: METEOR_WIKI}
	database["blue_star"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
		WIKI_COMPONENT: [{"text":"Le seul moyen de les obtenir est\\nde patienter lors de la nuit,\\nelles tombent alors du ciel."}],
		USED_FOR_CRAFTING: [
			{"type":"crafting_shapeless","result_count":2,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:diamond")], "result": ingr_repr("minecraft:diamond")},
			{"type":"crafting_shapeless","result_count":2,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:emerald")], "result": ingr_repr("minecraft:emerald")},
			{"type":"crafting_shapeless","result_count":4,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:gold_ingot")], "result": ingr_repr("minecraft:gold_ingot")},
			{"type":"crafting_shapeless","result_count":8,"group":"blue_star","category":MATERIAL,"ingredients":[ingr_repr("blue_star", ns), ingr_repr("minecraft:iron_ingot")], "result": ingr_repr("minecraft:iron_ingot")},
		]
	}

	# Player teams crystals
	colors: list[str] = ["purple", "yellow", "green", "cyan"]
	for color in colors:
		# Get the other colors and create a list of ingredients (3 other = 1 of the current color)
		other_colors: list[str] = [c for c in colors if c != color]
		ingredients: list[dict] = [ingr_repr(f"{c}_crystal", ns) for c in other_colors]

		# Add the item to the database (3 other crystals = 1 of the current color)
		database[f"{color}_crystal"] = {
			"id": CUSTOM_ITEM_VANILLA, "category": MATERIAL,
			WIKI_COMPONENT: CRYSTAL_WIKI,
			RESULT_OF_CRAFTING: [{"type":"crafting_shapeless","result_count":1,"group":"team_crystal","category":MATERIAL,"ingredients": ingredients}]
		}



	## Miscellaneous items
	# Gold fish craftable from 8 gold ingots and 1 fish
	eight_gold: list[dict] = 8 * [ingr_repr("minecraft:gold_ingot")]
	eight_powder: list[dict] = 8 * [ingr_repr("astral_powder", ns)]
	database["gold_fish"] = {
		"id": "minecraft:golden_apple",
		"category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Ces poissons sont équivalents à des golden apples."}],
		RESULT_OF_CRAFTING: [
			{"type":"crafting_shapeless","result_count":2,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_powder + [ingr_repr("gold_fish", ns)]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:cod")]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:salmon")]},
			{"type":"crafting_shapeless","result_count":1,"group":"gold_fish","category":MISCELLANEOUS,"ingredients": eight_gold + [ingr_repr("minecraft:tropical_fish")]},
		]
	}

	# Life Crystal
	database["life_crystal"] = {
		"id": "minecraft:golden_apple", "category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Chaque cristal de vie que vous consommez\\nvous donnera un demi-coeur supplémentaire.\\n\\nCependant, la limite est de 10 cristaux de vie consommés."}],
		RESULT_OF_CRAFTING: [
			{"type":"crafting_shapeless","result_count":1,"group":"life_crystal","category":MISCELLANEOUS,"ingredients": [
				ingr_repr("astral_powder", ns),
				ingr_repr("purple_crystal", ns),
			ingr_repr("yellow_crystal", ns),
			ingr_repr("green_crystal", ns),
			ingr_repr("cyan_crystal", ns)
		]},
	]}

	# Lunar compass (crafted with all 4 meteorites and a blue star)
	database["lunar_compass"] = {
		"id": CUSTOM_ITEM_VANILLA, "category": MISCELLANEOUS,
		WIKI_COMPONENT: [{"text":"Cette boussole guidera votre tribu\\nvers "},{"text":"le temple","obfuscated":True},{"text":" une fois activé."}],
		RESULT_OF_CRAFTING: [
		{"type":"crafting_shapeless","result_count":1,"group":"lunar_compass","category":MISCELLANEOUS,"ingredients": [
			ingr_repr("diamond_meteorite", ns),
			ingr_repr("emerald_meteorite", ns),
			ingr_repr("iron_meteorite", ns),
			ingr_repr("zinc_meteorite", ns),
			ingr_repr("blue_star", ns),
		]},
	]}

	# Letter
	database["letter"] = {"id": CUSTOM_ITEM_VANILLA, "category": MISCELLANEOUS, WIKI_COMPONENT: [{"text":"Voici la lettre que votre coinjoint(e) vous a envoyé(e)\\navant que vous ne partiez sur le front.\\n\\nPeut-être que vous aurez une fameuse occasion\\nde la lire une fois votre mission terminée."}]}

	# Horns
	horn_texture: str = f"{ns}:item/horns"
	horn_textures: dict = {"0":horn_texture,"particle":horn_texture}
	database["horns"] = {
		"id": CUSTOM_ITEM_VANILLA,
		"max_stack_size": 1,
		"equippable": {"slot": "head"},
		OVERRIDE_MODEL: {"credit":"Made with Blockbench","textures":horn_textures,"elements":[{"from":[1,0,6],"to":[5,4,10],"rotation":{"angle":22.5,"axis":"z","origin":[1,0,6]},"faces":{"north":{"uv":[12,0,13,1],"texture":"#0"},"east":{"uv":[12,0,13,1],"texture":"#0"},"south":{"uv":[12,0,13,1],"texture":"#0"},"west":{"uv":[12,0,13,1],"texture":"#0"},"up":{"uv":[12,0,13,1],"texture":"#0"},"down":{"uv":[12,0,13,1],"texture":"#0"}}},{"from":[0,4,6.5],"to":[3,7,9.5],"rotation":{"angle":0,"axis":"z","origin":[0,4,7]},"faces":{"north":{"uv":[13,3,16,0],"texture":"#0"},"east":{"uv":[13,3,16,0],"texture":"#0"},"south":{"uv":[13,3,16,0],"texture":"#0"},"west":{"uv":[13,3,16,0],"texture":"#0"},"up":{"uv":[13,3,14,2],"texture":"#0"},"down":{"uv":[13,3,16,0],"texture":"#0"}}},{"from":[0,7,7],"to":[2,10,9],"rotation":{"angle":-22.5,"axis":"z","origin":[0,7,6]},"faces":{"north":{"uv":[11,7,13,4],"texture":"#0"},"east":{"uv":[11,7,13,4],"texture":"#0"},"south":{"uv":[11,7,13,4],"texture":"#0"},"west":{"uv":[11,7,13,4],"texture":"#0"},"up":{"uv":[11,7,12,6],"texture":"#0"},"down":{"uv":[11,7,13,4],"texture":"#0"}}},{"from":[1,9,7.1],"to":[2.5,12,8.9],"rotation":{"angle":-22.5,"axis":"z","origin":[1,9,6]},"faces":{"north":{"uv":[4,10,6,7],"texture":"#0"},"east":{"uv":[4,10,6,7],"texture":"#0"},"south":{"uv":[4,10,6,7],"texture":"#0"},"west":{"uv":[4,10,6,7],"texture":"#0"},"up":{"uv":[4,10,5,9],"texture":"#0"},"down":{"uv":[4,10,6,7],"texture":"#0"}}},{"from":[2,11,7.5],"to":[3,14,8.5],"rotation":{"angle":-22.5,"axis":"z","origin":[2,11,6]},"faces":{"north":{"uv":[5,13,6,10],"texture":"#0"},"east":{"uv":[5,13,6,10],"texture":"#0"},"south":{"uv":[5,13,6,10],"texture":"#0"},"west":{"uv":[5,13,6,10],"texture":"#0"},"up":{"uv":[5,13,6,12],"texture":"#0"},"down":{"uv":[5,13,6,10],"texture":"#0"}}},{"from":[3,13,7.6],"to":[3.8,15,8.4],"rotation":{"angle":0,"axis":"z","origin":[3,13,6]},"faces":{"north":{"uv":[12,14,13,12],"texture":"#0"},"east":{"uv":[12,14,13,12],"texture":"#0"},"south":{"uv":[12,14,13,12],"texture":"#0"},"west":{"uv":[12,14,13,12],"texture":"#0"},"up":{"uv":[12,14,13,13],"texture":"#0"},"down":{"uv":[12,14,13,12],"texture":"#0"}}},{"from":[3,14.5,7.75],"to":[3.5,16.5,8.25],"rotation":{"angle":22.5,"axis":"z","origin":[3,15,6]},"faces":{"north":{"uv":[3,16,4,14],"texture":"#0"},"east":{"uv":[3,16,4,14],"texture":"#0"},"south":{"uv":[3,16,4,14],"texture":"#0"},"west":{"uv":[3,16,4,14],"texture":"#0"},"up":{"uv":[3,16,4,15],"texture":"#0"},"down":{"uv":[3,16,4,14],"texture":"#0"}}},{"from":[11,0,6],"to":[15,4,10],"rotation":{"angle":-22.5,"axis":"z","origin":[15,0,6]},"faces":{"north":{"uv":[13,0,12,1],"texture":"#0"},"east":{"uv":[13,0,12,1],"texture":"#0"},"south":{"uv":[13,0,12,1],"texture":"#0"},"west":{"uv":[13,0,12,1],"texture":"#0"},"up":{"uv":[13,0,12,1],"texture":"#0"},"down":{"uv":[13,0,12,1],"texture":"#0"}}},{"from":[13,4,6.5],"to":[16,7,9.5],"rotation":{"angle":0,"axis":"z","origin":[16,4,7]},"faces":{"north":{"uv":[16,3,13,0],"texture":"#0"},"east":{"uv":[16,3,13,0],"texture":"#0"},"south":{"uv":[16,3,13,0],"texture":"#0"},"west":{"uv":[16,3,13,0],"texture":"#0"},"up":{"uv":[14,3,13,2],"texture":"#0"},"down":{"uv":[16,3,13,0],"texture":"#0"}}},{"from":[14,7,7],"to":[16,10,9],"rotation":{"angle":22.5,"axis":"z","origin":[16,7,6]},"faces":{"north":{"uv":[13,7,11,4],"texture":"#0"},"east":{"uv":[13,7,11,4],"texture":"#0"},"south":{"uv":[13,7,11,4],"texture":"#0"},"west":{"uv":[13,7,11,4],"texture":"#0"},"up":{"uv":[12,7,11,6],"texture":"#0"},"down":{"uv":[13,7,11,4],"texture":"#0"}}},{"from":[13.5,9,7.1],"to":[15,12,8.9],"rotation":{"angle":22.5,"axis":"z","origin":[15,9,6]},"faces":{"north":{"uv":[6,10,4,7],"texture":"#0"},"east":{"uv":[6,10,4,7],"texture":"#0"},"south":{"uv":[6,10,4,7],"texture":"#0"},"west":{"uv":[6,10,4,7],"texture":"#0"},"up":{"uv":[5,10,4,9],"texture":"#0"},"down":{"uv":[6,10,4,7],"texture":"#0"}}},{"from":[13,11,7.5],"to":[14,14,8.5],"rotation":{"angle":22.5,"axis":"z","origin":[14,11,6]},"faces":{"north":{"uv":[6,13,5,10],"texture":"#0"},"east":{"uv":[6,13,5,10],"texture":"#0"},"south":{"uv":[6,13,5,10],"texture":"#0"},"west":{"uv":[6,13,5,10],"texture":"#0"},"up":{"uv":[6,13,5,12],"texture":"#0"},"down":{"uv":[6,13,5,10],"texture":"#0"}}},{"from":[12.2,13,7.6],"to":[13,15,8.4],"rotation":{"angle":0,"axis":"z","origin":[13,13,6]},"faces":{"north":{"uv":[13,14,12,12],"texture":"#0"},"east":{"uv":[13,14,12,12],"texture":"#0"},"south":{"uv":[13,14,12,12],"texture":"#0"},"west":{"uv":[13,14,12,12],"texture":"#0"},"up":{"uv":[13,14,12,13],"texture":"#0"},"down":{"uv":[13,14,12,12],"texture":"#0"}}},{"from":[12.5,14.5,7.75],"to":[13,16.5,8.25],"rotation":{"angle":-22.5,"axis":"z","origin":[13,15,6]},"faces":{"north":{"uv":[4,16,3,14],"texture":"#0"},"east":{"uv":[4,16,3,14],"texture":"#0"},"south":{"uv":[4,16,3,14],"texture":"#0"},"west":{"uv":[4,16,3,14],"texture":"#0"},"up":{"uv":[4,16,3,15],"texture":"#0"},"down":{"uv":[4,16,3,14],"texture":"#0"}}}],"display":{"thirdperson_righthand":{"translation":[-6,0,0]},"thirdperson_lefthand":{"translation":[-6,0,0]},"firstperson_righthand":{"rotation":[0,-45,0],"translation":[0,5,-4.75]},"firstperson_lefthand":{"rotation":[0,-45,0],"translation":[0,5,-4.75]},"gui":{"scale":[0.9,0.9,0.9]},"head":{"translation":[0,10,-2.5]}},"groups":[{"name":"horn","origin":[1,0,0],"color":0,"children":[0,1,2,3,4,5,6]},{"name":"horn","origin":[15,0,0],"color":0,"children":[7,8,9,10,11,12,13]}]}
	}
	database["small_horns"] = {
		"id": CUSTOM_ITEM_VANILLA,
		"max_stack_size": 1,
		"equippable": {"slot": "head"},
		OVERRIDE_MODEL: {"credit":"Made with Blockbench","parent":f"{ns}:item/horns","textures":horn_textures,"display":{"head": {"translation": [0, 10, -4],"scale": [0.75, 0.75, 0.75]}}}
	}


